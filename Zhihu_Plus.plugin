#!name= çŸ¥ä¹åŠ©æ‰‹Plus
#!desc= ğŸš«AD & åŠŸèƒ½å¢å¼º
#!icon= https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/script/zhihu/zhihu.png
# @blackmatrix7
# url= https://raw.githubusercontent.com/MCdasheng/Module/main/Zhihu_Plus.plugin 
#è‡ªç”¨å¤‡ä»½
[Rule]
# çŸ¥ä¹å»å¹¿å‘Š
DOMAIN,118.89.204.198,REJECT
IP-CIDR,118.89.204.198/32,REJECT,no-resolve
IP-CIDR6,2402:4e00:1200:ed00:0:9089:6dac:96b6/128,REJECT,no-resolve
DOMAIN,appcloud2.in.zhihu.com,REJECT
DOMAIN,mqtt.zhihu.com,REJECT
DOMAIN,sugar.zhihu.com,REJECT
USER-AGENT,AVOS*,REJECT
# æ‹¦æˆªçŸ¥ä¹å›ç­”ä¸‹çš„å¹¿å‘Š
URL-REGEX,^https?:\/\/www\.zhihu\.com\/api\/v4\/answers\/\d+\/recommendations,REJECT
# çŸ¥ä¹æ‹¦æˆªéƒ¨åˆ†é¢„åŠ è½½
URL-REGEX,^https?:\/\/www\.zhihu\.com\/appview\/(p|v2\/answer|zvideo)\/.*entry=(preload-topstory|preload-search|preload-subscription),REJECT
# æ‹¦æˆªçŸ¥ä¹å“ç‰Œæé—®å¹¿å‘Š
URL-REGEX,^https?:\/\/api\.zhihu\.com\/brand\/question\/\d+/card\?,REJECT
URL-REGEX,^https?:\/\/www\.zhihu\.com\/api\/v\d+\/brand\/question/\d+/card\?,REJECT

[URL Rewrite]
# çŸ¥ä¹å»é™¤æœ€å¸¸è®¿é—®
^https?:\/\/api\.zhihu\.com\/moments\/recent - reject-dict
# çŸ¥ä¹å»é™¤å›ç­”ä¸‹çš„å¹¿å‘Š
^https?:\/\/www\.zhihu\.com\/api\/v4\/answers\/\d+\/recommendations - reject-dict
# çŸ¥ä¹æ‹¦æˆªéƒ¨åˆ†é¢„åŠ è½½
^https?:\/\/www\.zhihu\.com\/appview\/(p|v2\/answer|zvideo)\/.*entry=(preload-topstory|preload-search|preload-subscription) - reject
# çŸ¥ä¹æ‹¦æˆªå…¶ä»–å¹¿å‘Š
^https?:\/\/api\.zhihu\.com\/(notifications\/v\d\/count|v\d\/package|me\/guides|drama\/living-info|ad|fringe|commercial|market\/popovers|.*featured-comment-ad|ad-style-service) - reject-dict
# çŸ¥ä¹ç½‘é¡µç‰ˆå»å¹¿å‘Š
^https?:\/\/www\.zhihu\.com\/api\/v4/(questions|anwsers)\/\d+/related-readings - reject-dict
^https?:\/\/www\.zhihu\.com\/api\/v4\/hot_recommendation - reject-dict
^https?:\/\/www\.zhihu\.com\/commercial_api\/banners_v3\/mobile_banner - reject-dict
^https?:\/\/zhuanlan\.zhihu\.com\/api\/articles\/\d+\/recommendation - reject-dict
# çŸ¥ä¹å“ç‰Œæé—®å¹¿å‘Š
^https?:\/\/api\.zhihu\.com\/brand\/question\/\d+/card\? - reject-dict
^https?:\/\/www\.zhihu\.com\/api\/v\d+\/brand\/question/\d+/card\? - reject-dict
# å±è”½æ¶ˆæ¯é¡µé¢ä¸Šæ‹‰çš„ç”¨æˆ·ç²¾é€‰
^https?:\/\/api\.zhihu\.com/moments/hybrid\? - reject-dict
# çŸ¥ä¹ä¸‹å‘çš„é…ç½®
^https?:\/\/api\.zhihu\.com\/ab\/api\/v1\/products\/zhihu\/platforms\/ios\/config - reject-200
# å±è”½çŸ¥ä¹â€œæˆ‘çš„â€é¡µé¢æ¨èå¼€é€šä¼šå‘˜çš„å¡ç‰‡
^https?:\/\/api\.zhihu\.com\/people\/self\/new_user_card - reject-200
# çŸ¥ä¹å»é™¤Tabé¡µå…³æ³¨äººå¤´åƒ
^https?:\/\/api\.zhihu\.com\/moments\/tab_v2 - reject-dict
# å±è”½çŸ¥ä¹8.3.0ç‰ˆæœ¬é¦–é¡µé¡¶éƒ¨çš„è§†é¢‘è§’æ ‡
^https?:\/\/api\.zhihu\.com\/explore\/entry\/tips - reject

[Script]
http-request ^https?:\/\/api\.zhihu\.com\/feed-root\/block requires-body=1,script-path=https://raw.githubusercontent.com/MCdasheng/Module/main/Scripts/Zhihu_AdBlock.js,tag=çŸ¥ä¹_å±è”½å…³é”®å­—è§£é”
http-response ^https?:\/\/api\.zhihu\.com\/people requires-body=1,script-path=https://raw.githubusercontent.com/MCdasheng/Module/main/Scripts/Zhihu_AdBlock.js,tag=çŸ¥ä¹_å¤„ç†ç”¨æˆ·ä¿¡æ¯
http-response ^https?:\/\/api\.zhihu\.com\/(moments|topstory)(\/|\?)?(recommend|action=|feed_type=)(?!\/people) requires-body=1,script-path=https://raw.githubusercontent.com/MCdasheng/Module/main/Scripts/Zhihu_AdBlock.js,tag=çŸ¥ä¹_ä¿¡æ¯æµå»å¹¿å‘ŠåŠé»‘åå•å¢å¼º
http-response ^https?:\/\/api\.zhihu\.com\/settings\/blocked_users requires-body=1,script-path=https://raw.githubusercontent.com/MCdasheng/Module/main/Scripts/Zhihu_AdBlock.js,tag=çŸ¥ä¹_è·å–é»‘åå•
http-response ^https?:\/\/api\.zhihu\.com\/(v4\/)?questions\/\d+ requires-body=1,script-path=https://raw.githubusercontent.com/MCdasheng/Module/main/Scripts/Zhihu_AdBlock.js,tag=çŸ¥ä¹_å›ç­”åˆ—è¡¨å»å¹¿å‘Š
http-response ^https?:\/\/api\.zhihu\.com\/notifications\/v3\/(message|timeline\/entry\/system_message) requires-body=1,script-path=https://raw.githubusercontent.com/MCdasheng/Module/main/Scripts/Zhihu_AdBlock.js,tag=çŸ¥ä¹_å®˜æ–¹æ¶ˆæ¯å»å¹¿å‘Š
http-response ^https?:\/\/api\.zhihu\.com\/search\/preset_words\? requires-body=1,script-path=https://raw.githubusercontent.com/MCdasheng/Module/main/Scripts/Zhihu_AdBlock.js,tag=çŸ¥ä¹_é¢„ç½®å…³é”®è¯å»å¹¿å‘Š
http-response ^https?:\/\/www\.zhihu\.com\/appview\/v2\/answer\/.*(entry=(?!(preload-topstory|preload-search|preload-subscription)))? requires-body=1,script-path=https://raw.githubusercontent.com/MCdasheng/Module/main/Scripts/Zhihu_AdBlock.js,tag=çŸ¥ä¹_å›ç­”å†…å®¹ä¼˜åŒ–
http-response ^https?:\/\/appcloud2\.zhihu\.com\/v\d+\/config requires-body=1,script-path=https://raw.githubusercontent.com/MCdasheng/Module/main/Scripts/Zhihu_AdBlock.js,tag=çŸ¥ä¹_ä¼˜åŒ–è½¯ä»¶é…ç½®
http-response ^https?:\/\/api\.zhihu\.com\/search\/top_search\/tabs\/hot\/items requires-body=1,script-path=https://raw.githubusercontent.com/MCdasheng/Module/main/Scripts/Zhihu_AdBlock.js,tag=çŸ¥ä¹_çƒ­æœå»å¹¿å‘Š
http-response ^https?:\/\/api\.zhihu\.com\/topstory\/hot-lists?(\?|\/) requires-body=1,script-path=https://raw.githubusercontent.com/MCdasheng/Module/main/Scripts/Zhihu_AdBlock.js,tag=çŸ¥ä¹_çƒ­æ¦œå»å¹¿å‘Š
http-response ^https?:\/\/api\.zhihu\.com\/(comment_v5\/)?(answers|comments?|articles|pins)\/\d+\/(root_|child_)?comments? requires-body=1,script-path=https://raw.githubusercontent.com/MCdasheng/Module/main/Scripts/Zhihu_AdBlock.js,tag=çŸ¥ä¹_è¯„è®ºå»å¹¿å‘Š
http-response ^https?:\/\/api\.zhihu\.com\/feed-root\/sections\/query\/v2 requires-body=1,script-path=https://raw.githubusercontent.com/MCdasheng/Module/main/Scripts/Zhihu_AdBlock.js,tag=çŸ¥ä¹_ç§»é™¤æ¨èé¡µé¡¶éƒ¨é¡¹

[MITM]
hostname = www.zhihu.com,api.zhihu.com,zhuanlan.zhihu.com,appcloud2.zhihu.com,103.41.167.236,103.41.167.234,103.41.167.235,103.41.167.226
